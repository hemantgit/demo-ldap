CREATE TABLE CONTENT_STREAM (id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL, CONTENT BLOB(31457280) NOT NULL, CONSTRAINT PK_CONTENT_STREAM PRIMARY KEY (id));

ALTER TABLE OBJECT_DATA ADD CS_ID BIGINT;

ALTER TABLE RENDITION ADD CS_ID BIGINT;

ALTER TABLE OBJECT_DATA DROP COLUMN STREAMID;

ALTER TABLE OBJECT_DATA ADD CONSTRAINT OBJECT_DATA_CONTENT_STREAM_FK FOREIGN KEY (CS_ID) REFERENCES CONTENT_STREAM (id);

CALL SYSPROC.ADMIN_CMD ('REORG TABLE OBJECT_DATA');

ALTER TABLE RENDITION ADD CONSTRAINT RENDITION_CONTENT_STREAM_FK FOREIGN KEY (CS_ID) REFERENCES CONTENT_STREAM (id);

CALL SYSPROC.ADMIN_CMD ('REORG TABLE RENDITION');

CREATE INDEX FK_OD_IDX_PARENT ON OBJECT_DATA(PARENT_ID);

CREATE INDEX FK_OD_IDX_CS_ID ON OBJECT_DATA(CS_ID);

CREATE INDEX FK_OD_IDX_OBJECT_TYPE_ID ON OBJECT_DATA(OBJECT_TYPE_ID);

CREATE INDEX FK_OTD_IDX_PARENT ON OBJECT_TYPE_DEFINITION(PARENT_ID);

CREATE INDEX FK_PD_IDX_OBJECT_DATA_ID ON PROPERTY_DATA(OBJECT_DATA_ID);

CREATE INDEX FK_PD_IDX_OBJECTID ON PROPERTY_DATA(OBJECTID);

CREATE INDEX FK_PD_IDX_PROP_DEF_ID ON PROPERTY_DATA(PROPERTY_DEFINITION_ID);

CREATE INDEX FK_PDEF_IDX_OBJECT_TYPE_ID ON PROPERTY_DEFINITION(OBJECT_TYPE_ID);

CREATE INDEX FK_RND_IDX_OBJECT_DATA_ID ON RENDITION(OBJECT_DATA_ID);
