{"version":3,"sources":["webpack:///webpack/universalModuleDefinition?5ca6****","webpack:///webpack/bootstrap 1a1e93b91b985a0bb2e4?16a7****","webpack:///./widget-bb-login-ng/model.xml","webpack:///external \"vendor-bb-angular\"?a114**","webpack:///./widget-bb-login-ng/scripts/index.js","webpack:///external \"lib-bb-widget-ng\"","webpack:///external \"model-bb-login-ng\"","webpack:///./widget-bb-login-ng/scripts/controller.js","webpack:///./widget-bb-login-ng/scripts/cookies.js"],"names":["module","controller","name","LoginController","model","widgetInstance","$ctrl","portal","window","b$","loginRedirectPage","getStringPreference","loginRedirectUrl","config","serverRoot","portalName","cookies","getCookies","token","key","value","username","password","loginError","$onInit","login","then","response","status","location","assign","catch","Object","document","cookie","split","decodeURIComponent"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA,0C;;;;;;;ACAA,gD;;;;;;;;;;;;;;;;;;;;;;;ACMA;;;;AAEA;;;;AAIA;;;;AACA;;;;;;AAbA;;;;;;mBAee,0BACZA,MADY,CACL,oBADK,EACiB,mDADjB,EAMZC,UANY,CAMD,iBANC,EAMkB;AAC7B;AAD6B;AAI7B;AAJ6B,sBANlB,EAcZC,I;;;;;;AC7BH,iD;;;;;;ACAA,iD;;;;;;;;;;;mBCSwBC,e;;AARxB;;;;;;AACA;;;;;;;AAOe,UAASA,eAAT,CAAyBC,KAAzB,EAAgCC,cAAhC,EAAgD;AAC7D,OAAMC,QAAQ,IAAd;;AAEA,OAAMC,SAASC,OAAOC,EAAP,CAAUF,MAAzB;;AAEA,OAAMG,oBAAoBL,eAAeM,mBAAf,CAAmC,mBAAnC,CAA1B;;AAEA,OAAMC,mBACDL,OAAOM,MAAP,CAAcC,UADb,SAC2BP,OAAOQ,UADlC,SACgDL,iBADtD;;AAGA,OAAMM,UAAU,kBAAQC,UAAR,EAAhB;;AAEA,OAAMC,QAAQ;AACZC,UAAK,QADO;AAEZC,YAAO;AAFK,IAAd;;AAKA,OAAMC,WAAW,EAAjB;AACA,OAAMC,WAAW,EAAjB;;AAEA,OAAMC,aAAa,KAAnB;;AAEA,OAAMC,UAAU,SAAVA,OAAU,GAAM;AACpBN,WAAME,KAAN,GAAcJ,QAAQE,MAAMC,GAAd,CAAd;AACD,IAFD;;AAIA,OAAMM,QAAQ,SAARA,KAAQ;AAAA,YACZrB,MAAMqB,KAAN,CAAYnB,MAAMe,QAAlB,EAA4Bf,MAAMgB,QAAlC,EAA4CJ,MAAME,KAAlD,EACGM,IADH,CACQ,UAACC,QAAD,EAAc;AAClB,WAAIA,SAASC,MAAT,KAAoB,GAAxB,EAA6B;AAC3BpB,gBAAOqB,QAAP,CAAgBC,MAAhB,CAAuBlB,gBAAvB;AACD;AACF,MALH,EAKKmB,KALL,CAKW,YAAM;AACbzB,aAAMiB,UAAN,GAAmB,IAAnB;AACAjB,aAAMgB,QAAN,GAAiB,EAAjB;AACD,MARH,CADY;AAAA,IAAd;;AAYAU,UAAOF,MAAP,CAAcxB,KAAd,EAAqB;AACnB;;;;;;;;AAQAkB,qBATmB;AAUnB;;;;;;;AAOAC,iBAjBmB;AAkBnB;;;;AAIAJ,uBAtBmB;AAuBnB;;;;AAIAC,uBA3BmB;AA4BnBC;AA5BmB,IAArB;AA8BD,E,CA7ED,mB;;;;;;;;;;;;;;ACAA;AACA;;;;;;;AAOA,KAAMN,aAAa,SAAbA,UAAa,GAAM;AACvB,OAAMD,UAAU,EAAhB;AADuB;AAAA;AAAA;;AAAA;AAEvB,0BAAqBiB,SAASC,MAAT,CAAgBC,KAAhB,CAAsB,IAAtB,CAArB,8HAAkD;AAAA,WAAvCD,MAAuC;;AAAA,2BAC1BA,OAAOC,KAAP,CAAa,GAAb,CAD0B;AAAA;AAAA,WACzCjC,IADyC;AAAA,WACnCkB,KADmC;;AAEhDJ,eAAQd,IAAR,IAAgBkC,mBAAmBhB,KAAnB,CAAhB;AACD;AALsB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAOvB,UAAOJ,OAAP;AACD,EARD;;mBAUe;AACbC;AADa,E","file":"widget-bb-login-ng/scripts/widget-bb-login-ng.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"vendor-bb-angular\"), require(\"lib-bb-widget-ng\"), require(\"model-bb-login-ng\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"widget-bb-login-ng\", [\"vendor-bb-angular\", \"lib-bb-widget-ng\", \"model-bb-login-ng\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"widget-bb-login-ng\"] = factory(require(\"vendor-bb-angular\"), require(\"lib-bb-widget-ng\"), require(\"model-bb-login-ng\"));\n\telse\n\t\troot[\"widget-bb-login-ng\"] = factory(root[\"vendor-bb-angular\"], root[\"lib-bb-widget-ng\"], root[\"model-bb-login-ng\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_15__, __WEBPACK_EXTERNAL_MODULE_16__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 1a1e93b91b985a0bb2e4","module.exports = require(\"./scripts/index.js\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./widget-bb-login-ng/model.xml\n// module id = 0\n// module chunks = 5","module.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vendor-bb-angular\"\n// module id = 2\n// module chunks = 0 3 4 5 7","/**\n * @module widget-bb-login-ng\n *\n * @description\n * Login widget\n */\nimport angular from 'vendor-bb-angular';\n\nimport widgetModuleKey, {\n  widgetKey,\n} from 'lib-bb-widget-ng';\n\nimport modelLoginModuleKey, { modelLoginKey } from 'model-bb-login-ng';\nimport Controller from './controller';\n\nexport default angular\n  .module('widget-bb-login-ng', [\n    modelLoginModuleKey,\n    widgetModuleKey,\n  ])\n\n  .controller('LoginController', [\n    // dependencies to inject\n    modelLoginKey,\n    widgetKey,\n    /* into */\n    Controller,\n  ])\n\n  .name;\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bb-login-ng/scripts/index.js","module.exports = __WEBPACK_EXTERNAL_MODULE_15__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-widget-ng\"\n// module id = 15\n// module chunks = 5 7","module.exports = __WEBPACK_EXTERNAL_MODULE_16__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"model-bb-login-ng\"\n// module id = 16\n// module chunks = 5 7","/* global window */\nimport Cookies from './cookies';\n/**\n * @name LoginController\n * @type {object}\n *\n * @description\n * Login widget\n */\nexport default function LoginController(model, widgetInstance) {\n  const $ctrl = this;\n\n  const portal = window.b$.portal;\n\n  const loginRedirectPage = widgetInstance.getStringPreference('loginRedirectPage');\n\n  const loginRedirectUrl =\n    `${portal.config.serverRoot}/${portal.portalName}/${loginRedirectPage}`;\n\n  const cookies = Cookies.getCookies();\n\n  const token = {\n    key: 'BBXSRF',\n    value: '',\n  };\n\n  const username = '';\n  const password = '';\n\n  const loginError = false;\n\n  const $onInit = () => {\n    token.value = cookies[token.key];\n  };\n\n  const login = () =>\n    model.login($ctrl.username, $ctrl.password, token.value)\n      .then((response) => {\n        if (response.status === 200) {\n          window.location.assign(loginRedirectUrl);\n        }\n      }).catch(() => {\n        $ctrl.loginError = true;\n        $ctrl.password = '';\n      }\n    );\n\n  Object.assign($ctrl, {\n    /**\n     * @description\n     * AngularJS Lifecycle hook used to initialize the controller\n     * @type {function}\n     *\n     * @name LoginController#$onInit\n     * @returns {void}\n     */\n    $onInit,\n    /**\n     * @description Login function\n     * @type {function}\n     *\n     * @name LoginController#login\n     * @returns {Promise}\n     */\n    login,\n    /**\n     * @name LoginController#username\n     * @type {string}\n     */\n    username,\n    /**\n     * @name LoginController#password\n     * @type {string}\n     */\n    password,\n    loginError,\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bb-login-ng/scripts/controller.js","/* global document */\n/**\n * @name Cookies\n * @type {object}\n * @description\n * Cookie utils\n */\n\nconst getCookies = () => {\n  const cookies = {};\n  for (const cookie of document.cookie.split('; ')) {\n    const [name, value] = cookie.split('=');\n    cookies[name] = decodeURIComponent(value);\n  }\n\n  return cookies;\n};\n\nexport default {\n  getCookies,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bb-login-ng/scripts/cookies.js"],"sourceRoot":""}